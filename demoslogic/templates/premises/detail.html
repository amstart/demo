{% extends "premises/base.html" %}

{% load crispy_forms_tags %}
{% load static %}
{% load i18n %}
{% load premises %}

{% block head_title %}{{ premise }}{% endblock %}

{% block inner %}
  <link rel="stylesheet" type="text/css" href="{% static 'premises/style.css' %}" />

  <h1> {% premise_print_with_class premise %} </h1>
  <a class="link_created_by" href="{% url 'users:detail' premise.user.username %}">
    created by: <h4 class="list-group-item-heading">{{ premise.user.username }}</h4>
  </a>
  {% if request.user == premise.user and not premise.staged %}
    <a href="{% url 'premises:delete' premise.id %}" class="btn btn-secondary" id='id_delete'>
      delete
    </a>
  {% endif %}

  <form action="{% url 'premises:vote' premise.id %}" method="post">
    {% csrf_token %}
    {% for choice in premise.choice_set.all %}
        <label><input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
        {{ choice.choice_text }}</label><br />
    {% endfor %}
    <input type="submit" value="Vote" />
  </form>
{% endblock %}
